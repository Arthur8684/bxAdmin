<!DOCTYPE html>
<html lang="zh-CN">
<head>
<META content="IE=9.0000" http-equiv="X-UA-Compatible">
<meta http-equiv="Content-Type" content="text/html; charset=__CHARSET__" />
<LINK href="__STATIC__css/bootstrap.min.css" rel="stylesheet"> 
<LINK href="__STATIC__css/admin.css" rel="stylesheet"> 
<LINK href="__STATIC__css/switch.min.css" rel="stylesheet"> 
<SCRIPT src="__STATIC__js/jquery.min.js" type="text/javascript"></SCRIPT>
<SCRIPT src="__STATIC__js/bootstrap.min.js" type="text/javascript"></SCRIPT>
<SCRIPT src="__STATIC__js/switch.min.js" type="text/javascript"></SCRIPT>
<SCRIPT src="__STATIC__js/diy.js" type="text/javascript"></SCRIPT>
<title>{:L('ADMIN_Manage_TITLE')}-{:L('ADMIN_Menu_OPERATE')}</title>
</head>
<body>
<div class="container-fluid">

<form class="form-inline" method="get">
  <div class="row padding_8">
  <link href='__STATIC__css/daterangepicker.css' rel='stylesheet' type='text/css'>
<script type='text/javascript' src='__STATIC__js/datetime_moment.min.js'></script>
<script type='text/javascript' src='__STATIC__js/datetime.js'></script>
<div class="row padding_8" id="times">
	<div class="col-md-3">
		 <div class="input-group col-md-12">
					<span class="input-group-addon">开始日期</span>
	<input name="times_start" type="text" class="form-control input-sm" id="times_start" value="{$times_start}">
		 </div> 
	</div>
	<div class="col-md-3">
		 <div class="input-group col-md-12">
					<span class="input-group-addon">结束日期</span>
	<input name="times_end" type="text" class="form-control input-sm" id="times_end"  value="{$times_end}">
		 </div> 
	</div>
</div><script>$(function(){$('#times').dateRangePicker({shortcuts : {'prev-days':[3,5,7],'prev':['week','month','year'],'next-days':[3,5,7],'next':['week','month','year']},autoClose: true,format: 'YYYY-MM-DD HH:mm',time: {enabled: true}, language: 'cn',separator : ' 到 ',
						getValue: function()
						{
							if ($('#times_start').val() && $('#times_end').val() )
								return $('#times_start').val() + ' to ' + $('#times_end').val();
							else
								return '';
						},
						setValue: function(s,s1,s2)
						{
							$('#times_start').val(s1);
							$('#times_end').val(s2);
						}});});</script>
                        
   </div>                       
  <div class="form-group">
    <label for="exampleInputName2">{:L('order_search_user')}</label>
    <input type="text" class="form-control" id="exampleInputName2" name="user_id" placeholder="{:L('order_search_user')}" value="{$user_id}">
  </div>
  <div class="form-group">
    <label for="exampleInputEmail2">{:L('order_search_sn')}</label>
    <input type="text" class="form-control" id="exampleInputEmail2" name="order_sn" placeholder="{:L('order_search_sn')}" value="{$order_sn}">
  </div>
  <div class="form-group">
    <label for="exampleInputEmail2">订单来源</label>
    <select name="order_come" class="form-control">
      <option value="-1" <if condition="$order_come eq -1">selected</if>>全部</option>
      <option value="0" <if condition="$order_come eq 0">selected</if>>{:L('order_come_0')}</option>
      <option value="1" <if condition="$order_come eq 1">selected</if>>{:L('order_come_1')}</option>
    </select>
  </div>
  <button type="submit" class="btn btn-default">{:L('order_search')}</button>
  <if condition="$order_status eq 0">
  		{:RR(array("Order/Admin/order_list",array('order_status'=>0,'order_come'=>$order_come,'user_id'=>$user_id,'order_sn'=>$order_sn,'times_start'=>$times_start,'times_end'=>$times_end,'shop_id'=>$shop_id,'shop_id'=>$shop_id)),L('Order_list_Menu_0'),"btn btn-success btn-sm")}
  <else/>
  		{:RR(array("Order/Admin/order_list",array('order_status'=>0,'order_come'=>$order_come,'user_id'=>$user_id,'order_sn'=>$order_sn,'times_start'=>$times_start,'times_end'=>$times_end,'shop_id'=>$shop_id)),L('Order_list_Menu_0'),"btn btn-default btn-sm")}  
  </if> 

  
  <if condition="$pay_status eq 0">            
   		{:RR(array("Order/Admin/order_list",array('pay_status'=>0,'order_come'=>$order_come,'user_id'=>$user_id,'order_sn'=>$order_sn,'times_start'=>$times_start,'times_end'=>$times_end,'shop_id'=>$shop_id)),L('Order_list_Menu_2'),"btn btn-success btn-sm")} 
  <else/> 
     	{:RR(array("Order/Admin/order_list",array('pay_status'=>0,'order_come'=>$order_come,'user_id'=>$user_id,'order_sn'=>$order_sn,'times_start'=>$times_start,'times_end'=>$times_end,'shop_id'=>$shop_id)),L('Order_list_Menu_2'),"btn btn-default btn-sm")}        
  </if> 
  <if condition="$ship_status eq 1">          
  		{:RR(array("Order/Admin/order_list",array('ship_status'=>1,'order_come'=>$order_come,'user_id'=>$user_id,'order_sn'=>$order_sn,'times_start'=>$times_start,'times_end'=>$times_end,'shop_id'=>$shop_id)),L('Order_list_Menu_3'),"btn btn-success btn-sm")} 
  <else/> 
  		{:RR(array("Order/Admin/order_list",array('ship_status'=>1,'order_come'=>$order_come,'user_id'=>$user_id,'order_sn'=>$order_sn,'times_start'=>$times_start,'times_end'=>$times_end,'shop_id'=>$shop_id)),L('Order_list_Menu_3'),"btn btn-default btn-sm")}       
  </if> 
  <if condition="$ship_status eq 2">         
  		{:RR(array("Order/Admin/order_list",array('ship_status'=>2,'order_come'=>$order_come,'user_id'=>$user_id,'order_sn'=>$order_sn,'times_start'=>$times_start,'times_end'=>$times_end,'shop_id'=>$shop_id)),L('Order_list_Menu_4'),"btn btn-success btn-sm")} 
  <else/> 
  		{:RR(array("Order/Admin/order_list",array('ship_status'=>2,'order_come'=>$order_come,'user_id'=>$user_id,'order_sn'=>$order_sn,'times_start'=>$times_start,'times_end'=>$times_end,'shop_id'=>$shop_id)),L('Order_list_Menu_4'),"btn btn-default btn-sm")}      
  </if> 
  <if condition="$order_status eq 4">        
  		{:RR(array("Order/Admin/order_list",array('order_status'=>4,'order_come'=>$order_come,'user_id'=>$user_id,'order_sn'=>$order_sn,'times_start'=>$times_start,'times_end'=>$times_end,'shop_id'=>$shop_id)),L('Order_list_Menu_5'),"btn btn-success btn-sm")} 
  <else/> 
  		{:RR(array("Order/Admin/order_list",array('order_status'=>4,'order_come'=>$order_come,'user_id'=>$user_id,'order_sn'=>$order_sn,'times_start'=>$times_start,'times_end'=>$times_end,'shop_id'=>$shop_id)),L('Order_list_Menu_5'),"btn btn-default btn-sm")}       
  </if> 
</form>

<form name="user_" id="user_" method="post" action="">
            
<table width="100%" border="0" cellpadding="0" cellspacing="0" class="table table-hover">
<thead>
  <tr>
<td width="3%" align="center" valign="middle">ID</td>
    <td width="15%" align="left" valign="middle"><span>{:L('order_sn')}</span></td>
    <td width="15%" align="left" valign="middle">{:L('order_time')}</td>
    <td align="left" valign="middle">{:L('order_consignee')}</td>
    <td align="center" valign="middle">{:L('goods_amount')}</td>
    <td align="center" valign="middle">{:L('order_amount')}</td>
    <td align="left" valign="middle">{:L('order_user')}</td>
    <td width="15%" align="center" valign="middle">{:L('order_status')}</td>
    <td width="15%" align="center" valign="middle">{:L('ADMIN_Menu_Operate')}</td>
  </tr>
</thead>  
<foreach name="info" item="v" key="k" >

  <tr>
    <td align="center" valign="middle"   id="text" >{$v['id']}</td>
    <td align="left" valign="middle"   id="text" >{$v['order_sn']}</td>
    <td align="left" valign="middle" >{$v[addtime]|date="Y-m-d H:i:s",###}</td>
    <td align="left" valign="middle">{$v['consignee']}</td>
    <td align="center" valign="middle">{$v['goods_amount']|number_format=2}</td>
    <td align="center" valign="middle">{$v['order_amount']|number_format=2}</td>
    <td align="left" valign="middle">{:user_info($v['user_id'],'user')}【{$v['user_id']}】</td>
    <td align="center" valign="middle">{$v['order_status_html']}</td>
    <td align="center" valign="middle">
	<if condition="$v['remark'] eq ''"><else/>{:RR('#',"<span class='glyphicon glyphicon-list-alt sizefont_16 ' aria-hidden='true' data-toggle='tooltip' data-placement='top' title='".$v['remark']."'></span>")}</if>  
	{:RR(array("Order/Admin/order_del","id=".$v[id]),"<span class='glyphicon glyphicon-trash  sizefont_16' aria-hidden='true' data-toggle='tooltip' data-placement='top' title='".L('DEL')."'></span>","","onClick=\\"return  jq_confirm(this,'".L('ADMIN_Del_Order',array('user_user'=>$v[user]))."')\\"")} 
	{:RR(array("Order/Admin/order_view","id=".$v[id]),"<span class='glyphicon glyphicon-search sizefont_16' aria-hidden='true' data-toggle='tooltip' data-placement='top' title='".L('order_view')."'></span>")}</td>
  </tr>
</foreach>
 <tr>
    <td colspan="9" align="center" valign="middle" ><table width="90%" border="0" align="center" cellpadding="0" cellspacing="0"  style="  width:800px;font-size:14px; font-weight:bold;">
  <tr>
    <td width="100">{:L('all_money')}</td>
    <td width="70">{:L('order_come_0')}：</td>
    <td width="140" align="left"  style=" font-weight:bold; color: <if condition="$accounts[money] lt 0">#f00</if><if condition="$accounts[money] gt 0">#090</if>" >{$accounts[money]|number_format=2}</td>
    <td width="70">{:L('order_come_1')}：</td>
    <td width="140" align="left"  style=" font-weight:bold; color: <if condition="$accounts[amount] lt 0">#f00</if><if condition="$accounts[amount] gt 0">#090</if>">{$accounts[amount]|number_format=2}</td>

  </tr>
</table></td>
    </tr>
</table>

{$page_show}
</form>
<script>
$('input[id="user_id"][type="checkbox"]').on('switchChange.bootstrapSwitch', function(event, state) {
   checkbox_id=$('input[id="id[]"][type="checkbox"]')
     if(state)
	 {
			checkbox_id.prop("checked", true);
	 }
	 else
	 {
			 checkbox_id.prop("checked", false);
	 }
});
function return_()
{
     checkbox_id=$('input[id="id[]"][type="checkbox"]:checked')
	 
	 if(checkbox_id.length<=0)
	 {
	     
	     jq_alert('{:L("ERR_ALL_SET")}','{:L("ERR_TLTLE")}','{:L("OK")}')
		 return false ;
	 }
	objects=document.getElementById('user_');
    jq_confirm(objects,'{:L("DEL_ALL_INFO")}','{:L("TLTLE_CONFIRM")}','{:L("OK")}','{:L("CANCEL")}')
	return false;
}
$('input[id="status"][type="checkbox"]').on('switchChange.bootstrapSwitch', function(event, state) {
        user_status=state?1:0;
	    URL="{:U('Admin/AdminAjax/user_ajax')}";
		para="{'id':'"+$(this).prop("value")+"','status':"+user_status+"}";
		para=eval('(' + para + ')');
     	$.getJSON(URL,para,function(json){
               if(json.err)
			   {
		            jq_alert(json.content);
			   }
			   
		});
});
$(document).ready(
    function()
	{ 
        $("[data-toggle='tooltip']").tooltip();
	}
	
);
</script>
</div>
</body>
</html>
